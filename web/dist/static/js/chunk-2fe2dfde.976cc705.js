(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fe2dfde"],{3973:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"tools-setting-view"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("工具路径配置管理")]),t("span",{staticClass:"warning"},[e._v("(需要先保存在加载load进内存)")]),t("div",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.fetchTools}},[e._v("刷新")]),t("el-button",{attrs:{type:"success",size:"small",loading:e.saving},on:{click:e.onSave}},[e._v("保存")])],1)]),t("el-form",{ref:"form",staticClass:"tools-form",attrs:{model:e.form,rules:e.rules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"Xray 可执行文件",prop:"xrayPath"}},[t("el-input",{attrs:{placeholder:"例如：/opt/xray/xray 或 C:\\xray\\xray.exe"},model:{value:e.form.xrayPath,callback:function(r){e.$set(e.form,"xrayPath","string"===typeof r?r.trim():r)},expression:"form.xrayPath"}})],1),t("el-form-item",{attrs:{label:"Crawlergo 可执行文件",prop:"crawlergoPath"}},[t("el-input",{attrs:{placeholder:"例如：/opt/crawlergo/crawlergo"},model:{value:e.form.crawlergoPath,callback:function(r){e.$set(e.form,"crawlergoPath","string"===typeof r?r.trim():r)},expression:"form.crawlergoPath"}})],1),t("el-form-item",{attrs:{label:"Chrome 可执行路径",prop:"chromePath"}},[t("el-input",{attrs:{placeholder:"例如：/usr/bin/google-chrome 或 C:\\Program Files\\Chrome\\chrome.exe"},model:{value:e.form.chromePath,callback:function(r){e.$set(e.form,"chromePath","string"===typeof r?r.trim():r)},expression:"form.chromePath"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"onload"},on:{click:e.onReload}},[e._v("加载配置")])],1),t("el-form-item",[t("el-button",{attrs:{type:"info"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1)],1)},o=[],s=t("c14f"),n=t("1da1"),c=(t("e9c4"),t("b64b"),t("498a"),t("bc3a"),t("2ade")),i="api/tools";function l(){return c["a"].get("".concat(i))}function u(e){return c["a"].put("".concat(i),e)}function f(){return c["a"].post("".concat(i,"/reload"))}var m={name:"ToolsSetting",data:function(){return{form:{xrayPath:"",crawlergoPath:"",chromePath:"",extra:""},original:null,saving:!1,testing:!1,rules:{xrayPath:[{required:!0,message:"请填写 Xray 可执行路径",trigger:"blur"}],crawlergoPath:[{required:!0,message:"请填写 Crawlergo 可执行路径",trigger:"blur"}],chromePath:[{required:!0,message:"请填写 Chrome 可执行路径",trigger:"blur"}]}}},created:function(){this.fetchTools()},methods:{fetchTools:function(){var e=this;return Object(n["a"])(Object(s["a"])().m((function r(){var t,a,o;return Object(s["a"])().w((function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,l();case 1:t=r.v,a=t.extra?JSON.stringify(t.extra,null,2):t.extra||"",e.form={xrayPath:t.xrayPath||"",crawlergoPath:t.crawlergoPath||"",chromePath:t.chromePath||"",extra:"string"===typeof t.extra?t.extra:a},e.original=JSON.parse(JSON.stringify(e.form)),e.$message.success("加载配置成功"),r.n=3;break;case 2:r.p=2,o=r.v,console.error(o),e.$message.error("加载配置失败："+(o.message||o));case 3:return r.a(2)}}),r,null,[[0,2]])})))()},onSave:function(){var e=this;this.$refs.form.validate(function(){var r=Object(n["a"])(Object(s["a"])().m((function r(t){var a,o,n,c;return Object(s["a"])().w((function(r){while(1)switch(r.p=r.n){case 0:if(t){r.n=1;break}return r.a(2);case 1:if(null,!e.form.extra||!e.form.extra.trim()){r.n=4;break}r.p=2,JSON.parse(e.form.extra),r.n=4;break;case 3:return r.p=3,n=r.v,e.$message.error("Extra 字段不是合法 JSON："+n.message),r.a(2);case 4:return a={xrayPath:e.form.xrayPath.trim(),crawlergoPath:e.form.crawlergoPath.trim(),chromePath:e.form.chromePath.trim()},e.saving=!0,r.p=5,r.n=6,u(a);case 6:e.original=JSON.parse(JSON.stringify(e.form)),e.$message.success("保存成功"),r.n=8;break;case 7:r.p=7,c=r.v,console.error(c),e.$message.error("保存失败："+((null===(o=c.response)||void 0===o?void 0:o.data)||c.message||c));case 8:return r.p=8,e.saving=!1,r.f(8);case 9:return r.a(2)}}),r,null,[[5,7,8,9],[2,3]])})));return function(e){return r.apply(this,arguments)}}())},onReset:function(){this.original?(this.form=JSON.parse(JSON.stringify(this.original)),this.$message.info("已重置为上次加载的值")):this.fetchTools()},onReload:function(){var e=this;return Object(n["a"])(Object(s["a"])().m((function r(){var t,a;return Object(s["a"])().w((function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,f();case 1:e.$message.success("配置已重新加载"),r.n=3;break;case 2:r.p=2,a=r.v,console.error(a),e.$message.error("重新加载配置失败："+((null===(t=a.response)||void 0===t?void 0:t.data)||a.message||a));case 3:return r.a(2)}}),r,null,[[0,2]])})))()}}},h=m,g=(t("ac9b"),t("2877")),p=Object(g["a"])(h,a,o,!1,null,"455de216",null);r["default"]=p.exports},6944:function(e,r,t){},ac9b:function(e,r,t){"use strict";t("6944")},e9c4:function(e,r,t){var a=t("23e7"),o=t("d066"),s=t("d039"),n=o("JSON","stringify"),c=/[\uD800-\uDFFF]/g,i=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(e,r,t){var a=t.charAt(r-1),o=t.charAt(r+1);return i.test(e)&&!l.test(o)||l.test(e)&&!i.test(a)?"\\u"+e.charCodeAt(0).toString(16):e},f=s((function(){return'"\\udf06\\ud834"'!==n("\udf06\ud834")||'"\\udead"'!==n("\udead")}));n&&a({target:"JSON",stat:!0,forced:f},{stringify:function(e,r,t){var a=n.apply(null,arguments);return"string"==typeof a?a.replace(c,u):a}})}}]);